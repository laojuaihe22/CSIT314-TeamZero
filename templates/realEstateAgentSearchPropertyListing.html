listings{% extends "baseUserDashboard.html" %}

{% block style %}

.agent-main {
    position: absolute;
    margin: 50px;
}

.agent-main p {
    font-size: 45px;
}

.profile-nav {
    font-size: 15px;
    margin-top: -20px;
    display: flex;
    margin-bottom: 20px;
    border-radius: 10px;
    box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.5);
    max-width: fit-content;
}

.Pnav-item {
    font-weight: bold;
    padding: 10px 25px;
    cursor: pointer;
    width: 120px;
    text-align: center;
}

.Pnav-item.active {
    font-weight: normal;
    background-color: black;
    color: white;
    border-radius: 10px;
}

.hidden {
    display: block;
    position: absolute;
    margin-top: 8%;
    margin-left: 50%; 
}

#listings {
    left: 50%;
    position: relative;
    width: 550px; /* Adjust the width as needed */
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    max-height: calc(100vh - 300px);
    overflow-y: auto;
}

.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    font-weight: bold;
}

input[type="text"],
input[type="number"],
select,
input[type="file"] {
    width: calc(100% - 16px); /* Adjusted width to accommodate border and padding */
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
}

button[type="submit"] {
    background-color: black;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

button[type="submit"]:hover {
    background-color: grey;
}

.logout img {
    margin: -15px;
    width: 50px;
    height: auto;
    color: black;
}

.listing-cards {
    margin: auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    /* Start from left */
}

.listing-card {
    margin: 20px;
    width: 250px;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.5);
    /* Add shadow */
}

.listing-card img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 10px 10px 0 0;
}

.listing-info .location-text {
    padding: 20px;
    font-size: 12px;
    /* Adjust the font size as desired */
}

.listing-info h3 {
    font-size: 15px;
    margin-bottom: 10px;
}


{% endblock style %}



{% block content %}

<div class="agent-main">
    <div class="agent-body">
    <div id="listings" class="hidden">
        <h2 class="title-delete">Search property</h2>

        <form id="listingForm" enctype="multipart/form-data" method="POST" action="/searchPropertyListing">
            <div class="form-group">
                <label for="filter">Search by:</label>
                <select id="filter" name="filter" required>
                    <option value="">-- Select Field --</option>
                    <option value="price">Price</option>
                    <option value="type">Type</option>
                    <!-- Add more options as needed -->
                </select>
            </div>
        
            <div class="form-group" id="valueInput" name ="value">
                <!-- Input field or dropdown box will be dynamically inserted here -->
            </div>
            <button type="submit">Search</button>
        </form>
    </div>
</div>

<div class="agent-main">
    <div class="agent-body">
        {% if property_list %}
        {% for property in property_list %}
            <div class="listing-cards">
                <div class="listing-card">
                    <img src="image1.jpg" alt="Listing 1">
                    <div class="listing-info">
                        <h3>The Vision</h3>
                        <h4 style="color: darkgreen;">{{ property.price }}</h4>
                        <p class="location-text" style="color: grey;">{{ property.address }}
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8mins</p>
                    </div>
                    <button class="delete-btn" onclick="deleteListing(this)">Delete</button>
                </div>
            </div>
        {% endfor %}
        {% else %}
        <!-- Display nothing if property_list is None -->
        {% endif %}
    </div>
</div>    


<script>
    document.addEventListener('DOMContentLoaded', function() {
    var filterSelect = document.getElementById('filter');
    var valueInput = document.getElementById('valueInput');

    filterSelect.addEventListener('change', function() {
        var selectedFilter = filterSelect.value;

        // Clear previous input field or dropdown box
        valueInput.innerHTML = '';

        if (selectedFilter === 'price') {
            // Create input field for price
            var inputField = document.createElement('input');
            inputField.type = 'number';
            inputField.id = 'value';
            inputField.name = 'value';
            inputField.placeholder = 'Enter price';
            inputField.required = true;
            valueInput.appendChild(inputField);
        } else if (selectedFilter === 'type') {
            // Create dropdown box for type
            var selectField = document.createElement('select');
            selectField.id = 'value';
            selectField.name = 'value';
            selectField.required = true;
            // Add options for property types (replace this with your actual data)
            var propertyTypes = ['Condo', 'Landed', 'Apartment'];
            propertyTypes.forEach(function(type) {
                var option = document.createElement('option');
                option.value = type;
                option.textContent = type;
                selectField.appendChild(option);
            });
            valueInput.appendChild(selectField);
        }
    });
});


</script>

{% endblock content %}
